<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script><script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Renderer Shader User Value (RSUV)</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<meta property="relative-path-to-manual" content="">
<meta property="version-switcher-versions-with-this-page" content="Versions with this page:">
<meta property="version-switcher-versions-without-this-page" content="Versions without this page:">
<meta property="version-switcher-supported" content="Supported">
<meta property="version-switcher-legacy" content="Legacy">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<link rel="canonical" href="https://docs.unity3d.com/6000.4/Documentation/Manual/renderer-shader-user-value.html">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=20251114"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=20251114"></script><script type="text/javascript" src="../StaticFilesManual/js/image-comp.js?ts=20251114"></script><script type="text/javascript" src="docdata/toc.js?ts=20251114"></script><script type="text/javascript" src="docdata/global_toc.js?ts=20251114"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=20251114">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/icons.css?ts=20251114">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<div id="DocsAnalyticsData" data-area="none" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a aria-label="go to the homepage" href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" aria-label="Search manual documentation" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>Unity 6.4 Alpha</b> (6000.4)
                                <div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/renderer-shader-user-value.html">English</a></li>
<li><a href="/cn/current/Manual/renderer-shader-user-value.html">中文</a></li>
<li><a href="/ja/current/Manual/renderer-shader-user-value.html">日本語</a></li>
<li><a href="/kr/current/Manual/renderer-shader-user-value.html">한국어</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a aria-label="go to the homepage" href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" aria-label="Search manual documentation" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: Unity 6.4 Alpha</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/renderer-shader-user-value.html">English</a></li>
<li><a href="/cn/current/Manual/renderer-shader-user-value.html">中文</a></li>
<li><a href="/ja/current/Manual/renderer-shader-user-value.html">日本語</a></li>
<li><a href="/kr/current/Manual/renderer-shader-user-value.html">한국어</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="materials-and-shaders.html">Materials and shaders</a></li>
<li><a href="Shaders.html">Custom shaders</a></li>
<li>Renderer Shader User Value (RSUV)</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a aria-label="go to the previous page" href="built-in-shader-examples-vertex-data.html"></a></span><div class="tip">Visualizing vertex data shader examples in the Built-In Render Pipeline</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a aria-label="go to the next page" href="shader-troubleshooting.html"></a></span><div class="tip">Troubleshooting shaders</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Renderer Shader User Value (RSUV)</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>In certain scenarios, games need to manage a large number of objects (e.g., MeshRenderers) while applying unique visual customization to each instance. Prior to the introduction of the Scriptable <span class="tooltip"><strong>Render Pipeline</strong><span class="tooltiptext">A series of operations that take the contents of a Scene, and displays them on a screen. Unity lets you choose from pre-built render pipelines, or write your own. <a class="tooltipMoreInfoLink" aria-label="Navigate to more info about render-pipelines.html" href="render-pipelines.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Renderpipeline" aria-label="Go to glossary anchor for Renderpipeline">Glossary</a></span></span></span> (SRP), the most efficient method for achieving this was through the use of Material Property Blocks (MPBs).</p>

<p>With the advent of the SRP Batcher, a more performant approach has been to generate a dedicated Material for each customized renderer. This method has demonstrated significantly better runtime performance compared to MPBs.</p>

<p>Nevertheless, in many cases the required customization per object is limited to only a small set of parameters. While duplicating the entire Material for each object is a nice and simple solution, you can now use a more focused and efficient alternative: the Renderer User <span class="tooltip"><strong>Shader</strong><span class="tooltiptext">A program that runs on the GPU. <a class="tooltipMoreInfoLink" aria-label="Navigate to more info about Shaders.html" href="Shaders.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Shader" aria-label="Go to glossary anchor for Shader">Glossary</a></span></span></span> Value (RSUV).</p>

<p>
<strong>Note</strong>: RSUV is only available with Scriptable Render Pipelines (SRP). It is not supported in Unity’s Built-in Renderer Pipeline (BiRP).</p>

<h2>Principle</h2>

<p>RSUV is accessible via the MeshRenderer and SkinnedMeshRenderer APIs:</p>

<ul>
<li><p><a href="../ScriptReference/MeshRenderer.SetShaderUserValue.html"><code>MeshRenderer.SetShaderUserValue(uint value)</code></a></p></li>
<li><p><a href="../ScriptReference/SkinnedMeshRenderer.SetShaderUserValue.html"><code>SkinnedMeshRenderer.SetShaderUserValue(uint value)</code></a></p></li>
</ul>

<p>This API enables the assignment of a custom 32-bit unsigned integer value to each renderer. The value is accessible within shader HLSL code through the <code>unity_RendererUserValue</code> property. Importantly, this functionality introduces <strong>no additional CPU overhead and does not interfere with batching.</strong>
</p>

<p>The primary advantage of this approach is that all customized renderers continue to share a single Material. As a result, in most scenarios it yields a notable performance improvement (see the Performance section below).</p>

<p>
<strong>Note</strong>: From the shader side, you can easily access the RSUV within Shader Graph through a <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@latest/index.html?subfolder=/manual/Custom-Function-Node.html"><strong>Custom Function</strong> node</a>.</p>

<h2>Use cases</h2>

<p>The RSUV can be applied flexibly in a variety of scenarios. For example:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Visual customization requirement</strong></th>
	<th style="text-align:left;"><strong>Recommended method with RSUV</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">Different diffuse colors per object</td>
	<td style="text-align:left;">Encode an RGBA32 color directly into the RSUV and decode it in shader code.</td>
</tr>
<tr>
	<td style="text-align:left;">Different shirt logo textures per character</td>
	<td style="text-align:left;">For example, with 16 available logos, allocate 4 bits of RSUV to encode the UV index across a single texture atlas containing all logos. You can use the remaining 28 bits to encode additional variations, such as color adjustments.</td>
</tr>
<tr>
	<td style="text-align:left;">Large amounts of custom data per renderer</td>
	<td style="text-align:left;">Use the RSUV as an index into a larger data structure stored in a global GraphicsBuffer.</td>
</tr>
</tbody>
</table>

<p>
<strong>Note</strong>: RSUV usage and encoding are shader-specific. For instance, one shader might interpret the RSUV as a color, while another may treat it as an index into auxiliary data.</p>

<h2>Performance</h2>

<p>The RSUV feature introduces no additional CPU overhead. Using RSUV to customize values per renderer is always slightly faster than duplicating a material and way faster than using Material Property Block (MPB).
The performance gain is maximum when using GPU Resident Drawer (GRD) as you no longer need to duplicate materials and break GRD instancing draw calls.</p>

<h2>Set and use the RSUV</h2>

<h3>Set the value</h3>

<p>The following example sets a random color to all MeshRenderer of the <span class="tooltip"><strong>scene</strong><span class="tooltiptext">A Scene contains the environments and menus of your game. Think of each unique Scene file as a unique level. In each Scene, you place your environments, obstacles, and decorations, essentially designing and building your game in pieces. <a class="tooltipMoreInfoLink" aria-label="Navigate to more info about CreatingScenes.html" href="CreatingScenes.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Scene" aria-label="Go to glossary anchor for Scene">Glossary</a></span></span></span>, encoded as 24bits integer:</p>

<pre><code class="lang-c#">        MeshRenderer[] allMeshRenderers = FindObjectsByType&lt;MeshRenderer&gt;(FindObjectsSortMode.InstanceID);
        foreach (MeshRenderer meshRenderer in allMeshRenderers)
        {
            // compute a random color
            Color32 c = Color.HSVToRGB(UnityEngine.Random.Range(0f, 1f), UnityEngine.Random.Range(0.6f, 1.0f), UnityEngine.Random.Range(0.6f, 1.0f));

            // set it as a LDR color in the RSUV value of the renderer
            uint cc = ((uint)c.b &lt;&lt; 16) | ((uint)c.g &lt;&lt; 8) | ((uint)c.r &lt;&lt; 0);
            meshRenderer.SetShaderUserValue(cc);
        }
</code></pre>

<h3>Use the value in the shader</h3>

<p>In the shader code, you can decode the 24bits value as a float4 color. For example:</p>

<pre><code class="lang-hlsl">uint c = unity_RendererUserValue;
float4 mycolor = float4((float)((c &gt;&gt; 0) &amp; 255) * (1.f / 255.f),
                        (float)((c &gt;&gt; 8) &amp; 255) * (1.f / 255.f),
                        (float)((c &gt;&gt; 16) &amp; 255) * (1.f / 255.f),
                        (float)1.f);
</code></pre>

<p>To retrieve the RSUV in <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@latest">Shader Graph</a>, you have to use a <a href="https://docs.unity3d.com/Packages/com.unity.shadergraph@latest/index.html?subfolder=/manual/Custom-Function-Node.html"><strong>Custom Function</strong> node</a>. For example:</p>

<ol>
<li>In the Graph <span class="tooltip"><strong>Inspector</strong><span class="tooltiptext">A Unity window that displays information about the currently selected GameObject, asset or project settings, allowing you to inspect and edit the values. <a class="tooltipMoreInfoLink" aria-label="Navigate to more info about UsingTheInspector.html" href="UsingTheInspector.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Inspector" aria-label="Go to glossary anchor for Inspector">Glossary</a></span></span></span>, in the Custom Function node properties:</li>
<li>Add an <strong>Output</strong> of type <strong>Vector 4</strong> and call it <strong>mycolor</strong>.</li>
<li>Set the <strong>Type</strong> to <strong>String</strong>.</li>
<li>Set the <strong>Name</strong> to <strong>getMyColor</strong>.</li>
<li>In the <strong>Body</strong> field, paste the code previously provided in this section.</li>
<li>In the Shader Graph’s workspace, connect the Custom Function node’s <strong>mycolor</strong> output to the Fragment’s <strong>Base Color</strong> input.</li>
</ol>

<h3>Use RSUV with Entities Graphics</h3>

<p>You can also use the RSUV feature along with Unity’s <a href="https://docs.unity3d.com/Packages/com.unity.entities.graphics@latest">Entities Graphics package</a>.</p>

<p>The following code example assigns a distinct RSUV value to all entities that include a MaterialMeshInfo component.</p>

<pre><code class="lang-c#">
using Unity.Entities;
using UnityEngine;
using Unity.Rendering;
using Unity.Burst;

[MaterialProperty(&quot;unity_RendererUserValuesPropertyEntry&quot;)]
public struct RendererUserValue_BaseValue : IComponentData
{
    public uint Value;
}

[BurstCompile]
public partial struct MaterialMeshInfoDebugSystem : ISystem
{

    private bool m_done;

    public void OnCreate(ref SystemState state)
    {
        m_done = false;
    }

    public void OnUpdate(ref SystemState state)
    {
        if ( !m_done )
        {
            var entityManager = state.EntityManager;
            var mQuery = entityManager.CreateEntityQuery(ComponentType.ReadOnly&lt;MaterialMeshInfo&gt;());
            // subscene may not be fully loaded, so wait for some entities to be here
            if (!mQuery.IsEmpty)
            {
                using (var entities = mQuery.ToEntityArray(Unity.Collections.Allocator.Temp))
                {
                    foreach (var entity in entities)
                    {
                        Color32 c = Color.HSVToRGB(UnityEngine.Random.Range(0f, 1f), UnityEngine.Random.Range(0.6f, 1.0f), UnityEngine.Random.Range(0.6f, 1.0f));
                        uint cc = ((uint)255&lt;&lt;24) | ((uint)c.b &lt;&lt; 16) | ((uint)c.g &lt;&lt; 8) | ((uint)c.r &lt;&lt; 0);

                        entityManager.AddComponentData(entity, new RendererUserValue_BaseValue { Value = cc });
                    }
                }
                m_done = true;
            }
        }
    }
}

</code></pre>
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a aria-label="go to the previous page" href="built-in-shader-examples-vertex-data.html"></a></span><div class="tip">Visualizing vertex data shader examples in the Built-In Render Pipeline</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a aria-label="go to the next page" href="shader-troubleshooting.html"></a></span><div class="tip">Troubleshooting shaders</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright ©2005-2025 Unity Technologies. All rights reserved. Built from 6000.4.0a6 (1fe5528373ba). Built on: 2025-11-14.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a><a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a><a href="https://unity.com/legal">Legal</a><a href="https://unity.com/legal/privacy-policy">Privacy Policy</a><a href="https://unity.com/legal/cookie-policy">Cookies</a><a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a><div id="ot-sdk-btn-container"><a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a></div>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
